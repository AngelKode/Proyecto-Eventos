<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Sistema</title>
  <!-- Tell the browser to be responsive to screen width -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="plugins/fontawesome-free/css/all.min.css">
  <!-- Ionicons -->
  <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
  <!-- fullCalendar -->
  <link rel="stylesheet" href="plugins/fullcalendar/main.min.css">
  <link rel="stylesheet" href="plugins/fullcalendar-daygrid/main.min.css">
  <link rel="stylesheet" href="plugins/fullcalendar-timegrid/main.min.css">
  <link rel="stylesheet" href="plugins/fullcalendar-bootstrap/main.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="dist/css/adminlte.min.css">
  <!-- Google Font: Source Sans Pro -->
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700" rel="stylesheet">
  <!-- Estilo Evidencias -->
  <link rel="stylesheet" type="text/css" href="css/estilos-EventoCalendarios.css">
  <link rel="stylesheet" href="https://unpkg.com/tippy.js@6/animations/scale.css"/>
  <link rel="stylesheet" href="css/tooltip.css">
  <!-- aver -->
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet"/>
  <link href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" rel="stylesheet"/>
  <link href="https://cdn.quilljs.com/1.0.0/quill.snow.css" rel="stylesheet"/>

</head>
<body class="hold-transition sidebar-mini">
<div>
  
  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper" style="margin: 0 0;">
    <!-- Content Header (Page header) -->
    <section class="content-header pb-0">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6 w-50 align-self-center">
            <h1>Calendario de Eventos</h1>
          </div>
          <div class="col-sm-6 float-right w-50 align-self-center">
            <div class="p-0 d-flex justify-content-end">
              <img src="img/logo_IPN.png" id="imgIPN">
              <a href="https://www.zacatecas.ipn.mx/"><img src="img/logo_UPIIZ.png" id="imgUPIIZ"></a>
            </div>
          </div>
        </div>
      </div><!-- /.container-fluid -->
    </section>

    <section class="content">
      <div class="container-fluid">
        <div class="row">
          <div class="col-md-0">
            <div class="sticky-top mb-3">
                  <!-- the events -->
                  <div id="external-events">
                  </div>
                </div>
                <!-- /.card-body -->
              <!-- /.card -->
              <div class="card">

              </div>
          <!-- /.col -->
          <div class="col-md-12">
            <div class="card card-primary" style="width: 100%;">
              <div class="card-body p-0">
                <!-- THE CALENDAR -->
                <div id="calendar"></div>
              </div>
            </div>
           </div>
              <!-- /.card-body -->
            <!-- /.card -->
        <!-- /.row -->
      </div>
      </div>
      </div><!-- /.container-fluid -->
    </section>
    

    <!-- DIV SIN EVIDENCIAS -->
    <div class="modal fade" id="sinEvidencias" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="tituloEvento"></h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="card">
                <div class="card-header pb-0" id="cardHeaderTituloEvid">
                    <div class="card-title">
                        Datos del Evento
                    </div>
                </div>
                <div class="card-body">

                  <div id="descripcionEvento" class="callout"></div>
                  <div>
                      <table width="100%" id="tablaSinEvid">
                          <tr>
                              <th width="50$">Tipo de Evento</th>
                              <th>Publico Objetivo</th>
                          </tr>
                          <tr>
                            <td><p id="tipo_evento"></p></td>
                            <td><p id="publico"></p></td>
                          </tr>
                          <tr>
                            <th>Fecha de Inicio</th>
                            <th>Fecha de Fin</th>
                          </tr>
                          <tr>
                              <td width="50%"><p id="fecha_in"></p></td>
                              <td><p id="fecha_fin"></p></td>
                          </tr>
                          <tr>
                            <th>Costo</th>
                            <th>Cantidad de Horas</th>
                          </tr>
                          <tr>
                              <td width="50%"><p id="costoEvCal"></p></td>
                              <td><p id="horasEvCal"></p></td>
                          </tr>
                          <tr>
                            <th colspan="2">Modalidad</td>
                          </tr>
                          <tr>
                            <td colspan="2" id="modalidadSinEvid"></td>
                          </tr>
                      </table>
                  </div>

                </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-info" data-dismiss="modal">Cerrar</button>
          </div>
        </div>
      </div>
    </div>
    <!-- FIN DIV SIN EVIDENCIAS -->

    <!-- DIV CON EVIDENCIAS -->
    <div class="modal fade" id="conEvidencias" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="tituloEv"></h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body" style="word-break: break-all">

              <div class="card">
                <div class="card-header pb-0" id="cardHeaderTituloEvid">
                    <div class="card-title">
                      Datos del Evento
                    </div>
                </div>
                <div class="card-body pb-0">

                    <div class="d-flex flex-column">
                      <div class="d-flex" id="primeraFilaDatos">
                        <div class="p-0" id="onvre"></div>
                        <div class="p-0" id="muhere"></div>
                        <div class="p-0"id="patos"></div>
                      </div>
                      <div class="d-flex" id="segundaFilaTitulo">
                        <div class="p-2"><strong>Costo</strong></div>
                        <div class="p-2" ><strong>Cantidad de Horas</strong></div>
                        <div class="p-2"><strong>Modalidad</strong></div>
                      </div>
                      <div class="d-flex" id="segundaFilaDatos">
                        <div id="costoEvid"></div>
                        <div id="horasEvid"></div>
                        <div id="modalidadEvid"></div>
                      </div>
                  </div><br>

                  <strong><p id="pormenorEvid">Pormenores</p></strong>
                  <div id="descripcionEv" class="callout"></div><br>

                </div>
              </div>

              <div class="card">
                <div class="card-header pb-0" id="cardHeaderEvidencias">
                  <div class="card-title">
                      Evidencias
                  </div>
                </div>
                  <div class="card-body">
                      <div class="row">
                          <div class="col-md-6 align-self-center">
                                <img class="img-fluid mb-3 mt-3" id="ev1" src="" width="100%">
                          </div>
                          <div class="col-md-6 align-self-center">
                              <img class="img-fluid mb-3 mt-3" id="ev2" src="" width="100%">
                          </div>
                      </div>
                    </div>
              </div>

          </div>

          <div class="modal-footer">
            <button type="button" class="btn btn-info" data-dismiss="modal">Cerrar</button>
          </div>
        </div>
      </div>
    </div>
    <!-- FIN DIV CON EVIDENCIAS -->

    <!-- /.content -->
  </div>
  <!-- /.content-wrapper -->

  <footer class="main-footer" style="margin: 0 0;">
      <div class="d-flex flex-row">
        <div class="w-50">
          <strong>Sistema de Registro de Eventos</strong>
        </div>
        <div class="w-50">
          <p style="text-align: right;"><strong>Versión</strong> 1.0.0</p>
        </div>
      </div>
  </footer>

  <!-- Control Sidebar -->
  <aside class="control-sidebar control-sidebar-dark">
    <!-- Control sidebar content goes here -->
  </aside>
  <!-- /.control-sidebar -->
</div>
<!-- ./wrapper -->

<!-- jQuery -->
<script src="plugins/jquery/jquery.min.js"></script>
<!-- Bootstrap -->
<script src="plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- jQuery UI -->
<script src="plugins/jquery-ui/jquery-ui.min.js"></script>
<!-- AdminLTE App -->
<script src="dist/js/adminlte.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="dist/js/demo.js"></script>
<!-- fullCalendar 2.2.5 -->
<script src="plugins/moment/moment.min.js"></script>
<script src="plugins/fullcalendar/main.min.js"></script>
<script src="plugins/fullcalendar-daygrid/main.min.js"></script>
<script src="plugins/fullcalendar-timegrid/main.min.js"></script>
<script src="plugins/fullcalendar-interaction/main.min.js"></script>
<script src="plugins/fullcalendar-bootstrap/main.min.js"></script>
<!--InputMask -->
<script src="plugins/moment/moment.min.js"></script>
<script src="plugins/inputmask/min/jquery.inputmask.bundle.min.js"></script>
<!-- date-range-picker -->
<script src="plugins/daterangepicker/daterangepicker.js"></script>
<script src="plugins/bs-custom-file-input/bs-custom-file-input.min.js"></script>
<script src="plugins/jquery/jquery.min.js"></script>
<!-- Bootstrap 4 -->
<script src="plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- DataTables -->
<script src="plugins/datatables/jquery.dataTables.js"></script>
<script src="plugins/datatables-bs4/js/dataTables.bootstrap4.js"></script>
<!-- AdminLTE App -->
<script src="dist/js/adminlte.min.js"></script>
<script src="plugins/select2/js/select2.full.min.js"></script>
<script src="plugins/toastr/toastr.min.js"></script>
<script src="plugins/sweetalert2/sweetalert2.min.js"></script>
<!-- IRAAAA -->
<script src="https://code.jquery.com/jquery-3.3.1.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
<!-- ORAAA -->
<script src="js/calendario_Evidencia_Eventos.js"></script>
<!-- AdminLTE App -->
<script src="dist/js/adminlte.min.js"></script>
<!-- Page specific script -->
<!-- Tooltip -->
<script src="https://unpkg.com/@popperjs/core@2"></script>
<script src="https://unpkg.com/tippy.js@6"></script>
<script>
  $(function () {

    /* initialize the calendar
     -----------------------------------------------------------------*/
    //Date for the calendar events (dummy data)
      var date = new Date()
      var d    = date.getDate(),
          m    = date.getMonth(),
          y    = date.getFullYear()

      var Calendar = FullCalendar.Calendar;
      var calendarEl = document.getElementById('calendar');

    // initialize the external events
    // -----------------------------------------------------------------

    var calendar = new Calendar(calendarEl, {
      locale : 'es',
      plugins: [ 'bootstrap', 'interaction', 'dayGrid', 'timeGrid' ],
      header    : {
        left  : 'prev,next today',
        center: 'title',
        right : 'dayGridMonth,timeGridWeek,timeGridDay'
      },
      //EVENTOS OBTENIDOS DE BD
      events: {
          url: 'php/eventos.php',
          color: '#682444',
          textColor: '#FFFFFF',
          rendering : "background"
      },
      buttonText : {//Cambiando el texto de los botones
        today : "Hoy",
        month : "Mes",
        week  : "Semana",
        day   : "Día"
      },
      allDayText : "Todo el día",//Asignamos al span allDayText el texto 'Todo el día',
      eventRender : function(info){

          $(info.el).mouseover(function(){//Obtenemos con jquery el elemento del calendario, que es info.el 
                                          //y con el método mouseover para saber que esta el mouse encima
              
              tippy(info.el, {
                  content: info.event.title,
                  followCursor : 'horizontal',
                  animation : 'scale',
                  theme : 'lightBorderModified',
                  touch : 'hold',//Para telefonos
                  placement : 'top',
                  inertia : true
              });
          });

      },
      eventClick: function(info) {
        aidi = info.event.extendedProps.idEvento;

        consultaEV(aidi);
        
              $('#tituloEvento').html('Evento: '+info.event.title);
              $('#descripcionEvento').html(info.event.extendedProps.description);
              $('#tipo_evento').text(info.event.extendedProps.tipoEv);
              $('#publico').text(info.event.extendedProps.publico);
              $('#costoEvCal').text("$"+info.event.extendedProps.costo);
              $('#horasEvCal').text(info.event.extendedProps.horas);
              $("#modalidadSinEvid").html(info.event.extendedProps.modalidad);
              $("#modalidadEvid").html(info.event.extendedProps.modalidad);
        
              var titulo = info.event.title;
              $('#tituloEv').html('Evento: '+titulo);
              $('#pa').html(info.event.extendedProps.publico);
              var fechaIn = info.event.start;
              var fechaFin = info.event.extendedProps.endDate;
              var dd    = fechaIn.getDate(),
                  mm    = fechaIn.getMonth() +1,
                  yy    = fechaIn.getFullYear()
              $('#fecha_in').html(dd+"/"+mm+"/"+yy);
              if (fechaFin != null) {
                  let yy = fechaFin.substr(0,4);
                  fechaFin = fechaFin.substr(5);
                  let mm = fechaFin.substr(0,2);
                  fechaFin = fechaFin.substr(3);
                  let dd = fechaFin.substr(0,2);

                  $('#fecha_fin').html(dd+"/"+mm+"/"+yy);
              }
              else{
                  $('#fecha_fin').html();
              }
      },
      editable  : false,
      droppable : false,
      drop      : function(info) {
        // is the "remove after drop" checkbox checked?
        if (checkbox.checked) {
          // if so, remove the element from the "Draggable Events" list
          info.draggedEl.parentNode.removeChild(info.draggedEl);
        }
      }    
    });

    calendar.render();
  })
  
</script>
<script src="js/responsiveCalendar.js"></script>
</body>
</html>
